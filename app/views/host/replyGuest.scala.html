@(hostReplyForm: Form[models.viewmodels.MessageForm], owner: models.UserCredential, msgId: String, message: models.message.Message)(implicit request: RequestHeader)
@import helper.twitterBootstrap._


@views.html.host.hostReplyMain(owner, hostReplyForm, msgId, message.read) {
    <div class="well well-hdc">
        @utils.Helpers.getUserFromRequest match {
            case None => {}
            case Some(currentUser) => {
                <div class="grade hdc-grade">
                    @helper.form(action = routes.MessagesController.replyToGuest()) {
                        <fieldset>

                            @if(hostReplyForm.get.messageType.getOrElse("").equalsIgnoreCase("REQUEST")) {
                                @if(message.getResponses != null) {
                                    <table>
                                        <tbody>
                                            @for(msg <- message.getResponses) {
                                                <tr>
                                                    <td>
                                                        <strong>@Messages("mails.inbox.header.replied") : </strong>
                                                    </td>
                                                    <td>
                                                        @msg.request
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                    <br/>
                                }
                                <table>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <strong>@Messages("mails.inbox.header.date") : </strong>
                                            </td>
                                            <td>
                                                @hostReplyForm.get.date.format("yyyy-MM-dd") @hostReplyForm.get.time.format("HH:mm")
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>@Messages("mails.inbox.header.guest.number") : </strong>
                                            </td>
                                            <td>
                                                @hostReplyForm.get.numberOfGuests
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>@Messages("mails.inbox.header.phone") : </strong>
                                            </td>
                                            <td>
                                                @hostReplyForm.get.phone
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>@Messages("mails.inbox.header.message") : </strong>
                                            </td>
                                            <td>
                                                @hostReplyForm.get.request
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <br/>
                                <div class="col-xs-12">
                                    @helper.inputTextHorizontal(hostReplyForm("firstName"), 'readonly -> "readonly", '_label -> "Till", 'class -> "col-sm-10")
                                    @helper.inputTextHorizontal(hostReplyForm("response"), 'type -> "textarea", 'rows -> 6, '_label -> "Svar", 'required -> "required", 'class -> "col-sm-10")
                                </div>


                                <div class="form-actions">
                                    <input type="submit" class="btn btn-primary pull-right" value="@Messages("mails.hosting.request.reply")">
                                </div>
                            }

                            @if(hostReplyForm.get.messageType.getOrElse("").equalsIgnoreCase("REPLY")){
                                @if(message.getResponses != null) {
                                    <table>
                                        <tbody>
                                            @for(msg <- message.getResponses) {
                                                <tr>
                                                    <td>
                                                        <strong>@Messages("mails.inbox.header.message") : </strong>
                                                    </td>
                                                    <td>
                                                        @msg.request
                                                    </td>
                                                </tr>
                                            }
                                            <tr>
                                                <td>
                                                    <strong>@Messages("mails.inbox.header.answer") : </strong>
                                                </td>
                                                <td>
                                                    @hostReplyForm.get.request.getOrElse("")
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                }
                            }
                            @helper.inputHidden(hostReplyForm("firstName"))
                            @helper.inputHidden(hostReplyForm("lastName"))
                            @helper.inputHidden(hostReplyForm("messageType"))
                            @helper.inputHidden(hostReplyForm("date"))
                            @helper.inputHidden(hostReplyForm("time"))
                            @helper.inputHidden(hostReplyForm("numberOfGuests"))
                            @helper.inputHidden(hostReplyForm("phone"))
                            @helper.inputHidden(hostReplyForm("request"))
                            @helper.inputHidden(hostReplyForm("memberId"))
                            @helper.inputHidden(hostReplyForm("hostId"))
                            @helper.inputHidden(hostReplyForm("createdDate"))
                            @helper.inputHidden(hostReplyForm("messageId"))
                        </fieldset>
                        <br/>
                        <br/>

                    }
                </div>
            }
        }
    </div>
}
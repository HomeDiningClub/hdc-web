@(profileName: String)

<script>
$(document).ready(function(){

var map = 0;
var resultsNextBtnBlogg = "#resultNextBlogg";
var resultsPrevBtnBlogg = "#resultPrevBlogg";
var resultsTotalBlogg = "#resultsTotalBlogg";


function blogTemplate(value){
var l = "";
l = l + "<div class='row'><div class='col-xs-12'>";
l = l + "<a href='" + "/blogg/view/" + value.objectId + "' class='link-recipe-panel'>";
l = l + "<h2>" +  " " + value.title + "</h2>";
l = l + "</a>" + " "+ value.dateMod;
l = l + "<div><img src='" + value.mainImage + "' class='img-responsive'></div>";
l = l + "<div>" + value.text + "</div>";
l = l + "</div></div>";
l = l + "</div></div>";

return l;
}

function getBloggBoxesAsJSON(pageDirection){
$.getJSON('@{routes.BloggPostsPageController.viewBloggPostByNameAndProfilePageJSON()}?profileName=@profileName&page=' + (map+pageDirection) + '&tid=' + Date(), function(data){
var nrOfItems = 0;
var myArr = [];
var hasNext = false;
var hasPrev = false;
var totalPages = 0;

$.each(data,function(key,value) {
if(nrOfItems == 0){
hasNext = value.hasNext;
hasPrev = value.hasPrevious;
totalPages = value.totalPages;
}

nrOfItems = nrOfItems + 1;
myArr.push(blogTemplate(value));
});

if(nrOfItems > 0) {
if(hasNext)
$(resultsNextBtnBlogg).show();
else
$(resultsNextBtnBlogg).hide();

if(hasPrev)
$(resultsPrevBtnBlogg).show();
else
$(resultsPrevBtnBlogg).hide();

map = map + pageDirection;

if(totalPages > 1)
$(resultsTotalBlogg).html((map+1) + " / " + totalPages);

$('#bloggList').html(myArr.join(''));
}

});
}

// Get default
getBloggBoxesAsJSON(0);

// Attach events to buttons
$(resultsNextBtnBlogg).off("click").on("click", function(){getBloggBoxesAsJSON(1)});
$(resultsPrevBtnBlogg).off("click").on("click", function(){getBloggBoxesAsJSON(-1)});

});
</script>

<div id="bloggList"></div>
<div class="row pagination-hdc">
    <div class="col-xs-6 col-sm-5">
        <button id="resultPrevBlogg" class="btn btn-default pull-right"><span class="glyphicon glyphicon-arrow-left"></span>&nbsp;@Messages("button.previous")</button>
    </div>
    <div id="resultsTotalBlogg" class="col-xs-2 hidden-xs text-center"></div>
    <div class="col-xs-6 col-sm-5">
        <button id="resultNextBlogg" class="btn btn-default pull-left">@Messages("button.next") &nbsp; <span class="glyphicon glyphicon-arrow-right"></span></button>
    </div>
</div>